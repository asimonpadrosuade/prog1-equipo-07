<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>{{ pelicula.titulo }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/styles/all.css" />
    <link rel="stylesheet" href="/static/styles/peliculas.css" />
  </head>
  <body class="mx-lg-5 mx-md-2 mx-sm-0">
    <header>
      <h1 class="title">PyTicket</h1>
    </header>

    <main>
      <div class="main-container row g-5 px-sm-5 px-3">
        <div class="poster-container col-4">
          <img
            src="/static/imagenes/posters/p{{ pelicula.id }}.webp"
            alt="Poster de {{ pelicula.titulo }}"
            class="img-fluid rounded-4 w-100"
          />
          <p></p>
        </div>

        <div class="info-container flex-grow-1">
          <div class="texto-container mb-3">
            <h1 class="titulo-pelicula text-light">{{ pelicula.titulo }}</h1>
            <p class="descripcion text-light">{{ pelicula.sinopsis }}</p>
          </div>
          <div class="categorias-container"></div>

          
          <form action="" method="post" class="bg-dark text-light p-3 rounded-4 mt-4">
  
            {% if formatos and formatos|length>1 %}
            <div class="mb-3">
              <label class="form-label">Formato</label>
              <div class="d-flex gap-3 flex-wrap">
                {% for f in formatos %}
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="formato" id="fmt{{ loop.index }}"
                         value="{{ f }}" {% if loop.first %}checked{% endif %}>
                  <label class="form-check-label" for="fmt{{ loop.index }}">{{ f }}</label>
                </div>
                {% endfor %}
              </div>
            </div>
            {% else %}
            <input type="hidden" name="formato" value="{{ formatos[0] if formatos else '2D' }}">
            {% endif %}

            {% if fechas and fechas|length>0 %}
            <div class="mb-3">
              <label class="form-label">Fecha</label>
              <select name="fecha" class="form-select">
                {% for f in fechas %}
                <option value="{{ f }}" {% if f==fecha_sel %}selected{% endif %}>
                  {{ f if f else 'Sin fecha fija' }}
                </option>
                {% endfor %}
              </select>
            </div>
            {% endif %}

            {% if idiomas and idiomas|length>0 %}
            <div class="mb-3">
              <label class="form-label">Idioma</label>
              <div class="d-flex gap-3 flex-wrap">
                {% for i in idiomas %}
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="idioma" id="idi{{ loop.index }}"
                         value="{{ i }}" {% if i==idioma_sel or (not idioma_sel and loop.first) %}checked{% endif %}>
                  <label class="form-check-label" for="idi{{ loop.index }}">{{ i }}</label>
                </div>
                {% endfor %}
              </div>
            </div>
            {% endif %}

            {% if horarios and horarios|length>0 %}
            <div class="mb-3">
              <label class="form-label">Horario</label>
              <div class="d-flex gap-3 flex-wrap">
                {% for h in horarios %}
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="horario" id="hor{{ loop.index }}"
                         value="{{ h }}" {% if loop.first %}checked{% endif %}>
                  <label class="form-check-label" for="hor{{ loop.index }}">{{ h }}</label>
                </div>
                {% endfor %}
              </div>
            </div>
            {% endif %}

            <button class="btn btn-primary" type="submit">Confirmar selección</button>
          </form>

          {% if seleccion_confirmada %}
          <section class="bg-dark text-light p-3 rounded-4 mt-4">
            <h3 class="h5 mb-3">Elegir cantidades</h3>

            <div class="tira d-grid gap-3 align-items-center border rounded-3 p-3 mb-3">
              <div class="tira__titulo fw-semibold">Entrada común</div>
              <div class="tira__precio">$
                {{ precios.comun }}
              </div>
              <div class="tira__cantidad">
                <label class="form-label">Cantidad</label>
                <input class="form-control" type="number" min="0" max="10" step="1" value="0">
              </div>
            </div>

            <div class="tira d-grid gap-3 align-items-center border rounded-3 p-3 mb-3">
              <div class="tira__titulo fw-semibold">Menor / Jubilado</div>
              <div class="tira__precio">$
                {{ precios.menor_jubilado }}
              </div>
              <div class="tira__cantidad">
                <label class="form-label">Cantidad</label>
                <input class="form-control" type="number" min="0" max="10" step="1" value="0">
              </div>
            </div>

            <div class="tira d-grid gap-3 align-items-center border rounded-3 p-3">
              <div class="tira__titulo fw-semibold">Movistar</div>
              <div class="tira__precio">$
                {{ precios.movistar }}
              </div>
              <div class="tira__cantidad">
                <label class="form-label">Cantidad</label>
                <input class="form-control" type="number" min="0" max="10" step="1" value="0">
              </div>
            </div>

            <div class="d-flex justify-content-end mt-3">
              <button class="btn btn-success" type="button">Continuar</button>
            </div>
          </section>
          {% endif %}
          <!-- FIN PARTE 3 -->
        </div>
      </div>
    </main>

    <footer></footer>
  </body>
</html>

